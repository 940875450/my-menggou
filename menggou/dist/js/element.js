"use strict";require(["config"],function(){require(["jquery","template","url","cookie"],function(a,r,s,e){a.ajax({type:"get",url:s.url+"/php/element.php",dataType:"json",data:{userid:a.cookie("userid")},success:function(e){var t=r("elementImg",{data:e});a("#elementimg").html(t);var n=r("elementright",{data:e});a("#elementRight").html(n),function(){a(".show-small img").on("click",function(){a(".wrap-show img:eq(0)").attr("src",a(this).attr("src"))});var e=parseInt(a(".element-other").css("margin-left")),t=!1;a("#element-next").on("click",function(){t||(t=!0,e=parseInt(a(".element-other").css("margin-left")),a(".element-other").animate({"margin-left":e-a(".element-one:eq(0)").width()},function(){e<=-a(".element-one:eq(0)").width()*parseInt(a(".element-item").length/4)?(a("#element-next").css({background:"#e0e0e0",cursor:"default"}),a(".element-other").css({"margin-left":-a(".element-one:eq(0)").width()*parseInt(a(".element-item").length/4)})):a("#element-prev,#element-next").css({background:"#333",cursor:"pointer"}),t=!1}))}),a("#element-prev").on("click",function(){t||(t=!0,e=parseInt(a(".element-other").css("margin-left")),a(".element-other").animate({"margin-left":e+a(".element-one:eq(0)").width()},function(){0<=e?(a(".element-other").css({"margin-left":"0px"}),a("#element-prev").css({background:"#e0e0e0",cursor:"default"})):a("#element-prev,#element-next").css({background:"#333",cursor:"pointer"}),t=!1}))})}(),a(".put-gwc").on("click",function(){null!=a.cookie("useName")?a.ajax({url:s.url+"/php/list.php",type:"GET",dataType:"json",data:{user:a.cookie("useName")},success:function(e){console.log(e[0].username),console.log(a.cookie("userid"));var t=e[0].username,n=a.cookie("userid");a.ajax({url:s.url+"/php/gwc.php",type:"GET",dataType:"json",data:{userid:e[0].username,eleid:a.cookie("userid")},success:function(e){e.code?a.ajax({url:s.url+"/php/gwcaddnum.php",type:"GET",dataType:"json",data:{userid:t,eleid:n},success:function(e){alert("添加购物车成功！")}}):a.ajax({url:s.url+"/php/gwcadd.php",type:"GET",dataType:"json",data:{userid:t,eleid:n},success:function(e){alert("添加购物车成功！")}})}})}}):alert("请先登录 (´･ω･`)")})}}),a.ajax({url:s.url+"/php/index.php",type:"GET",dataType:"json",success:function(e){if(""!=e){var t=r("elementOther",{data:e});a("#elementother").html(t),a(".element-item a").on("click",function(){var e=a(this).attr("data-id");a.cookie("userid",e,{expires:30,path:"/"})}),a(".element-selected").on("click",function(){a(this).addClass("selected").siblings().removeClass("selected")})}}})})});